{% load static %}
<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="icon" href="{% static 'image/recycbles.png' %}" type="image/png">
        <title>{% block title %} 4RS Environmental Management {% endblock %}</title>
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
        <link rel="stylesheet" href="{% static 'vendors/linericon/style.css' %}">
        <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">
        <link rel="stylesheet" href="{% static 'vendors/owl-carousel/owl.carousel.min.css' %}">
        <link rel="stylesheet" href="{% static 'vendors/bootstrap-datepicker/bootstrap-datetimepicker.min.css' %}">
        <link rel="stylesheet" href="{% static 'vendors/nice-select/css/nice-select.css' %}">
        <link rel="stylesheet" href="{% static 'vendors/owl-carousel/owl.carousel.min.css' %}">
        <!-- main css -->
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
        <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
        <link rel="stylesheet" href="{% static 'css/w3style.css' %}">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="stylesheet" href="{% static 'app/css/owl.carousel.min.css'%}"/>
        <link rel="stylesheet" href="{% static 'app/css/all.min.css'%}"/>
        <link rel="stylesheet" href="{% static 'app/css/style.css'%}"/>
    </head>
    <body>
        <!--================Header Area =================-->
            {%include "navbar_login.html"%}
        <!--================Header Area =================-->
        <br>
        <br>
        <br>
        <br>
        <!--================Body Area =================-->
            {% block main-content %}{% endblock main-content %}

        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
        <script src="{% static 'js/popper.js' %}"></script>
        <script src="{% static 'js/bootstrap.min.js' %}"></script>
        <script src="{% static 'vendors/owl-carousel/owl.carousel.min.js' %}"></script>
        <script src="{% static 'js/jquery.ajaxchimp.min.js' %}"></script>
        <script src="{% static 'js/mail-script.js' %}"></script>
        <script src="{% static 'vendors/bootstrap-datepicker/bootstrap-datetimepicker.min.js' %}"></script>
        <script src="{% static 'vendors/nice-select/js/jquery.nice-select.js' %}"></script>
        <script src="{% static 'js/mail-script.js' %}"></script>
        <script src="{% static 'js/stellar.js' %}"></script>
        <script src="{% static 'vendors/lightbox/simpleLightbox.min.js' %}"></script>
        <script src="{% static 'js/custom.js' %}"></script>

        {% comment %} Added some js {% endcomment %}
        <script src="{% static 'js/owl.carousel.min.js'%}"> </script>
        <script src="{% static 'js/all.min.js'%}"> </script>
        <script src="{% static 'js/myscript.js'%}"> </script>

        <script>
            function loadCSS(url) {
                var link = document.createElement('link');
                link.rel = 'stylesheet';
                link.href = url;
        
                // Append the <link> element to the <head> tag
                document.head.appendChild(link);
            }
        
            // Function to check if the CSS file has changed
            function checkCSSChange(url) {
                fetch(url)
                    .then(response => response.text())
                    .then(css => {
                        // Compare the current CSS content with the previously stored content
                        if (css !== sessionStorage.getItem(url)) {
                            // If CSS has changed, reload the CSS file
                            console.log('CSS file changed:', url);
                            reloadCSS(url);
                        }
                        // Store the current CSS content
                        sessionStorage.setItem(url, css);
                    })
                    .catch(error => console.error('Error checking CSS file:', error));
            }
        
            // Function to reload CSS file
            function reloadCSS(url) {
                var links = document.head.querySelectorAll('link[rel="stylesheet"]');
                links.forEach(function(link) {
                    if (link.href === url) {
                        // If found, remove the existing link
                        link.parentNode.removeChild(link);
                        // Load the CSS file again
                        loadCSS(url);
                    }
                });
            }
        
            // Call the function to load your CSS files
            loadCSS('dashboard_static/css_dashboard/style.css');
            loadCSS('dashboard_static/bootstrap-select/dist/css/bootstrap-select.min.css');
            loadCSS('dashboard_static/chartist/css/chartist.min.css');
        
            // Function to automatically reload the page every 1 minute
            function reloadPage() {
                window.location.reload(true); // Reload the page
            }
        
            // Set interval to reload the page every 1 minute (60,000 milliseconds)
            setInterval(reloadPage, 600000);
        
            // Set interval to check for changes in CSS files every 5 seconds (5000 milliseconds)
            setInterval(() => {
                checkCSSChange('/workspaces/sustainability/09_main/myapp/static/dashboard_static/css/style.css');
                checkCSSChange('09_main/myapp/templates/reuse.html');
                checkCSSChange('09_main/myapp/templates/recycle.html');
                checkCSSChange('09_main/myapp/templates/recover.html');
                checkCSSChange('09_main/myapp/templates/reduce.html');
                checkCSSChange('09_main/myapp/templates/create_profile.html');
            }, 60000);
        </script>
        

    </body>
</html>